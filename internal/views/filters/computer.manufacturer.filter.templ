package filters

import (
	"fmt"
	"golang.org/x/exp/slices"
)

templ FilterByComputerManufacturer(f AgentFilter, url, target, swap string, vendors []string) {
	<button title="Filter by manufacturer" type="button">
		if len(f.ComputerManufacturers) > 0 {
			<uk-icon icon="filter-x" hx-history="false" custom-class="mr-2 h-5 w-5 fill-red-500 text-red-500" uk-cloak></uk-icon>
		} else {
			<uk-icon icon="filter" hx-history="false" custom-class="mr-2 h-5 w-5" uk-cloak></uk-icon>
		}
	</button>
	<div class="uk-drop uk-dropdown" uk-dropdown="mode: click">
		<ul class="uk-dropdown-nav uk-nav">
			for index, vendor := range vendors {
				<li class="p-2">
					<input
						id={ fmt.Sprintf("filterByComputerManufacturer%d", index) }
						name={ fmt.Sprintf("filterByComputerManufacturer%d", index) }
						type="checkbox"
						value={ vendor }
						class="uk-checkbox mx-3"
						hx-post={ url }
						hx-push-url="false"
						hx-target={ target }
						hx-swap={ swap }
						checked?={ slices.Contains(f.ComputerManufacturers, vendor) }
					/>
					<label for={ fmt.Sprintf("filterByComputerManufacturer%d", index) }>{ vendor }</label>
				</li>
			}
		</ul>
	</div>
}
